<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Optimized Belief Propagation (CPU and GPU): src/beliefprop/BpOptimizeCUDA/KernelBpStereo.cu File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Optimized Belief Propagation (CPU and GPU)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_kernel_bp_stereo_8cu.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">KernelBpStereo.cu File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file defines the methods to perform belief propagation for disparity map estimation from stereo images on CUDA.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_shared_bp_processing_functs_8h_source.html">BpSharedFuncts/SharedBpProcessingFuncts.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for KernelBpStereo.cu:</div>
<div class="dyncontent">
<div class="center"><img src="_kernel_bp_stereo_8cu__incl.png" border="0" usemap="#asrc_2beliefprop_2_bp_optimize_c_u_d_a_2_kernel_bp_stereo_8cu" alt=""/></div>
<map name="asrc_2beliefprop_2_bp_optimize_c_u_d_a_2_kernel_bp_stereo_8cu" id="asrc_2beliefprop_2_bp_optimize_c_u_d_a_2_kernel_bp_stereo_8cu">
<area shape="rect" title="This file defines the methods to perform belief propagation for disparity map estimation from stereo ..." alt="" coords="1396,5,1586,47"/>
<area shape="rect" href="_shared_bp_processing_functs_8h.html" title=" " alt="" coords="1360,95,1622,136"/>
<area shape="rect" href="_run_settings_8h.html" title=" " alt="" coords="540,191,783,218"/>
<area shape="rect" href="_run_type_constraints_8h.html" title="Define constraints for data type in processing." alt="" coords="1517,437,1737,464"/>
<area shape="rect" href="_utility_functs_8h.html" title=" " alt="" coords="1664,191,1835,218"/>
<area shape="rect" href="_bp_consts_enums_aliases_8h.html" title=" " alt="" coords="1392,348,1590,389"/>
<area shape="rect" href="_bp_evaluation_stereo_sets_8h.html" title=" " alt="" coords="1207,184,1402,225"/>
<area shape="rect" title=" " alt="" coords="600,437,675,464"/>
<area shape="rect" title=" " alt="" coords="740,601,837,628"/>
<area shape="rect" title=" " alt="" coords="699,273,763,300"/>
<area shape="rect" title=" " alt="" coords="787,273,854,300"/>
<area shape="rect" href="_run_data_8h.html" title="Class to store headers with data corresponding to current program run and evaluation." alt="" coords="326,355,472,382"/>
<area shape="rect" href="_input_signature_8h.html" title="Class for defining input signature for evaluation run that consists of evaluation set number,..." alt="" coords="924,355,1053,382"/>
<area shape="rect" href="_run_settings_consts_enums_8h.html" title=" " alt="" coords="24,512,254,553"/>
<area shape="rect" href="_c_p_u_threads_pinned_to_socket_8h.html" title="Class for setting and retrieving setting of CPU threads pinned to socket." alt="" coords="292,273,506,300"/>
<area shape="rect" title=" " alt="" coords="430,437,493,464"/>
<area shape="rect" title=" " alt="" coords="38,601,88,628"/>
<area shape="rect" title=" " alt="" coords="518,437,576,464"/>
<area shape="rect" title=" " alt="" coords="124,437,210,464"/>
<area shape="rect" title=" " alt="" coords="234,437,314,464"/>
<area shape="rect" title=" " alt="" coords="338,437,406,464"/>
<area shape="rect" title=" " alt="" coords="1108,437,1184,464"/>
<area shape="rect" title=" " alt="" coords="1208,437,1267,464"/>
<area shape="rect" href="_run_eval_consts_enums_8h.html" title=" " alt="" coords="851,437,1083,464"/>
<area shape="rect" title=" " alt="" coords="1342,519,1398,546"/>
<area shape="rect" title=" " alt="" coords="236,355,301,382"/>
<area shape="rect" title=" " alt="" coords="1581,519,1673,546"/>
<area shape="rect" href="_bp_settings_8h.html" title=" " alt="" coords="878,273,1098,300"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="_kernel_bp_stereo_8cu__dep__incl.png" border="0" usemap="#asrc_2beliefprop_2_bp_optimize_c_u_d_a_2_kernel_bp_stereo_8cudep" alt=""/></div>
<map name="asrc_2beliefprop_2_bp_optimize_c_u_d_a_2_kernel_bp_stereo_8cudep" id="asrc_2beliefprop_2_bp_optimize_c_u_d_a_2_kernel_bp_stereo_8cudep">
<area shape="rect" title="This file defines the methods to perform belief propagation for disparity map estimation from stereo ..." alt="" coords="8,5,199,47"/>
<area shape="rect" href="_process_bp_c_u_d_a_8cpp.html" title="Defines the functions to run the CUDA implementation of 2D Stereo estimation using BP." alt="" coords="5,95,201,136"/>
</map>
</div>
</div>
<p><a href="_kernel_bp_stereo_8cu_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacebeliefprop_c_u_d_a"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebeliefprop_c_u_d_a.html">beliefpropCUDA</a></td></tr>
<tr class="memdesc:namespacebeliefprop_c_u_d_a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Namespace to define global kernel functions for parallel belief propagation processing using CUDA. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab306a6710aed26a0653c06fd7c5cc08f"><td class="memTemplParams" colspan="2">template&lt;RunData_t T, unsigned int DISP_VALS&gt; </td></tr>
<tr class="memitem:ab306a6710aed26a0653c06fd7c5cc08f"><td class="memTemplItemLeft" align="right" valign="top">__global__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacebeliefprop_c_u_d_a.html#ab306a6710aed26a0653c06fd7c5cc08f">beliefpropCUDA::InitializeBottomLevelData</a> (<a class="el" href="structbeliefprop_1_1_bp_level_properties.html">beliefprop::BpLevelProperties</a> current_bp_level, float *image_1_pixels_device, float *image_2_pixels_device, T *data_cost_stereo_checkerboard_0, T *data_cost_stereo_checkerboard_1, float lambda_bp, float data_k_bp, unsigned int bp_settings_disp_vals)</td></tr>
<tr class="memdesc:ab306a6710aed26a0653c06fd7c5cc08f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the "data cost" for each possible disparity between the two full-sized input images ("bottom" of the image pyramid). The image data is stored in the image_1_pixels_device and image_2_pixels_device arrays.  <a href="namespacebeliefprop_c_u_d_a.html#ab306a6710aed26a0653c06fd7c5cc08f">More...</a><br /></td></tr>
<tr class="separator:ab306a6710aed26a0653c06fd7c5cc08f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7712a4a5a1af239b994e2460b879817c"><td class="memTemplParams" colspan="2">template&lt;RunData_t T, unsigned int DISP_VALS&gt; </td></tr>
<tr class="memitem:a7712a4a5a1af239b994e2460b879817c"><td class="memTemplItemLeft" align="right" valign="top">__global__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacebeliefprop_c_u_d_a.html#a7712a4a5a1af239b994e2460b879817c">beliefpropCUDA::InitializeCurrentLevelData</a> (<a class="el" href="namespacebeliefprop.html#a85dcfe709b354b19752ea8ae432f5af5">beliefprop::CheckerboardPart</a> checkerboard_part, <a class="el" href="structbeliefprop_1_1_bp_level_properties.html">beliefprop::BpLevelProperties</a> current_bp_level, <a class="el" href="structbeliefprop_1_1_bp_level_properties.html">beliefprop::BpLevelProperties</a> prev_bp_level, T *data_cost_checkerboard_0, T *data_cost_checkerboard_1, T *data_cost_current_level, unsigned int offset_num, unsigned int bp_settings_disp_vals)</td></tr>
<tr class="memdesc:a7712a4a5a1af239b994e2460b879817c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the data costs at the "next" level up in the pyramid given that the data at the lower has been set.  <a href="namespacebeliefprop_c_u_d_a.html#a7712a4a5a1af239b994e2460b879817c">More...</a><br /></td></tr>
<tr class="separator:a7712a4a5a1af239b994e2460b879817c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f82847fdb5f3e30d525055d6ec92d73"><td class="memTemplParams" colspan="2">template&lt;RunData_t T, unsigned int DISP_VALS&gt; </td></tr>
<tr class="memitem:a7f82847fdb5f3e30d525055d6ec92d73"><td class="memTemplItemLeft" align="right" valign="top">__global__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacebeliefprop_c_u_d_a.html#a7f82847fdb5f3e30d525055d6ec92d73">beliefpropCUDA::InitializeMessageValsToDefaultKernel</a> (<a class="el" href="structbeliefprop_1_1_bp_level_properties.html">beliefprop::BpLevelProperties</a> current_bp_level, T *message_u_checkerboard_0, T *message_d_checkerboard_0, T *message_l_checkerboard_0, T *message_r_checkerboard_0, T *message_u_checkerboard_1, T *message_d_checkerboard_1, T *message_l_checkerboard_1, T *message_r_checkerboard_1, unsigned int bp_settings_disp_vals)</td></tr>
<tr class="memdesc:a7f82847fdb5f3e30d525055d6ec92d73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the message values at each pixel of the current level to the default value.  <a href="namespacebeliefprop_c_u_d_a.html#a7f82847fdb5f3e30d525055d6ec92d73">More...</a><br /></td></tr>
<tr class="separator:a7f82847fdb5f3e30d525055d6ec92d73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a899657bb3e3e1b444c4a5530cce29046"><td class="memTemplParams" colspan="2">template&lt;RunData_t T, unsigned int DISP_VALS&gt; </td></tr>
<tr class="memitem:a899657bb3e3e1b444c4a5530cce29046"><td class="memTemplItemLeft" align="right" valign="top">__global__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacebeliefprop_c_u_d_a.html#a899657bb3e3e1b444c4a5530cce29046">beliefpropCUDA::RunBPIterationUsingCheckerboardUpdates</a> (<a class="el" href="namespacebeliefprop.html#a85dcfe709b354b19752ea8ae432f5af5">beliefprop::CheckerboardPart</a> checkerboard_to_update, <a class="el" href="structbeliefprop_1_1_bp_level_properties.html">beliefprop::BpLevelProperties</a> current_bp_level, T *data_cost_checkerboard_0, T *data_cost_checkerboard_1, T *message_u_checkerboard_0, T *message_d_checkerboard_0, T *message_l_checkerboard_0, T *message_r_checkerboard_0, T *message_u_checkerboard_1, T *message_d_checkerboard_1, T *message_l_checkerboard_1, T *message_r_checkerboard_1, float disc_k_bp, bool data_aligned, unsigned int bp_settings_disp_vals)</td></tr>
<tr class="memdesc:a899657bb3e3e1b444c4a5530cce29046"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kernel function to run the current iteration of belief propagation in parallel using the checkerboard update method where half the pixels in the "checkerboard" scheme retrieve messages from each 4-connected neighbor and then update their message based on the retrieved messages and the data cost.  <a href="namespacebeliefprop_c_u_d_a.html#a899657bb3e3e1b444c4a5530cce29046">More...</a><br /></td></tr>
<tr class="separator:a899657bb3e3e1b444c4a5530cce29046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9f52d0c29a7961fd17857f51bdace00"><td class="memTemplParams" colspan="2">template&lt;RunData_t T, unsigned int DISP_VALS&gt; </td></tr>
<tr class="memitem:ae9f52d0c29a7961fd17857f51bdace00"><td class="memTemplItemLeft" align="right" valign="top">__global__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacebeliefprop_c_u_d_a.html#ae9f52d0c29a7961fd17857f51bdace00">beliefpropCUDA::RunBPIterationUsingCheckerboardUpdates</a> (<a class="el" href="namespacebeliefprop.html#a85dcfe709b354b19752ea8ae432f5af5">beliefprop::CheckerboardPart</a> checkerboard_to_update, <a class="el" href="structbeliefprop_1_1_bp_level_properties.html">beliefprop::BpLevelProperties</a> current_bp_level, T *data_cost_checkerboard_0, T *data_cost_checkerboard_1, T *message_u_checkerboard_0, T *message_d_checkerboard_0, T *message_l_checkerboard_0, T *message_r_checkerboard_0, T *message_u_checkerboard_1, T *message_d_checkerboard_1, T *message_l_checkerboard_1, T *message_r_checkerboard_1, float disc_k_bp, bool data_aligned, unsigned int bp_settings_disp_vals, void *dst_processing)</td></tr>
<tr class="memdesc:ae9f52d0c29a7961fd17857f51bdace00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kernel function to run the current iteration of belief propagation in parallel using the checkerboard update method where half the pixels in the "checkerboard" scheme retrieve messages from each 4-connected neighbor and then update their message based on the retrieved messages and the data cost. Function differs from counterpart overloaded function with same name in that it takes in allocated memory to use in processing.  <a href="namespacebeliefprop_c_u_d_a.html#ae9f52d0c29a7961fd17857f51bdace00">More...</a><br /></td></tr>
<tr class="separator:ae9f52d0c29a7961fd17857f51bdace00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10ccb426c45302cc412ff2d996034718"><td class="memTemplParams" colspan="2">template&lt;RunData_t T, unsigned int DISP_VALS&gt; </td></tr>
<tr class="memitem:a10ccb426c45302cc412ff2d996034718"><td class="memTemplItemLeft" align="right" valign="top">__global__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacebeliefprop_c_u_d_a.html#a10ccb426c45302cc412ff2d996034718">beliefpropCUDA::CopyMsgDataToNextLevel</a> (<a class="el" href="namespacebeliefprop.html#a85dcfe709b354b19752ea8ae432f5af5">beliefprop::CheckerboardPart</a> checkerboard_part, <a class="el" href="structbeliefprop_1_1_bp_level_properties.html">beliefprop::BpLevelProperties</a> current_bp_level, <a class="el" href="structbeliefprop_1_1_bp_level_properties.html">beliefprop::BpLevelProperties</a> next_bp_level, T *message_u_prev_checkerboard_0, T *message_d_prev_checkerboard_0, T *message_l_prev_checkerboard_0, T *message_r_prev_checkerboard_0, T *message_u_prev_checkerboard_1, T *message_d_prev_checkerboard_1, T *message_l_prev_checkerboard_1, T *message_r_prev_checkerboard_1, T *message_u_checkerboard_0, T *message_d_checkerboard_0, T *message_l_checkerboard_0, T *message_r_checkerboard_0, T *message_u_checkerboard_1, T *message_d_checkerboard_1, T *message_l_checkerboard_1, T *message_r_checkerboard_1, unsigned int bp_settings_disp_vals)</td></tr>
<tr class="memdesc:a10ccb426c45302cc412ff2d996034718"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kernel to copy the computed BP message values at the current level to the corresponding locations at the "next" level down. The kernel works from the point of view of the pixel at the current level that is being copied to four corresponding pixels in the next level.  <a href="namespacebeliefprop_c_u_d_a.html#a10ccb426c45302cc412ff2d996034718">More...</a><br /></td></tr>
<tr class="separator:a10ccb426c45302cc412ff2d996034718"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdc1bf71faed3396ca433b6ac8f8a472"><td class="memTemplParams" colspan="2">template&lt;RunData_t T, unsigned int DISP_VALS&gt; </td></tr>
<tr class="memitem:abdc1bf71faed3396ca433b6ac8f8a472"><td class="memTemplItemLeft" align="right" valign="top">__global__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacebeliefprop_c_u_d_a.html#abdc1bf71faed3396ca433b6ac8f8a472">beliefpropCUDA::RetrieveOutputDisparity</a> (<a class="el" href="structbeliefprop_1_1_bp_level_properties.html">beliefprop::BpLevelProperties</a> current_bp_level, T *data_cost_checkerboard_0, T *data_cost_checkerboard_1, T *message_u_checkerboard_0, T *message_d_checkerboard_0, T *message_l_checkerboard_0, T *message_r_checkerboard_0, T *message_u_checkerboard_1, T *message_d_checkerboard_1, T *message_l_checkerboard_1, T *message_r_checkerboard_1, float *disparity_between_images_device, unsigned int bp_settings_disp_vals)</td></tr>
<tr class="memdesc:abdc1bf71faed3396ca433b6ac8f8a472"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the best disparity estimate from image 1 to image 2 for each pixel in parallel.  <a href="namespacebeliefprop_c_u_d_a.html#abdc1bf71faed3396ca433b6ac8f8a472">More...</a><br /></td></tr>
<tr class="separator:abdc1bf71faed3396ca433b6ac8f8a472"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file defines the methods to perform belief propagation for disparity map estimation from stereo images on CUDA. </p>
<dl class="section author"><dt>Author</dt><dd>Scott Grauer-Gray</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2024 </dd></dl>

<p class="definition">Definition in file <a class="el" href="_kernel_bp_stereo_8cu_source.html">KernelBpStereo.cu</a>.</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_3a0eeb4a5126a024c0a4a4399c3b8570.html">beliefprop</a></li><li class="navelem"><a class="el" href="dir_6d83f76d1c6d057d65c64394a7ea105b.html">BpOptimizeCUDA</a></li><li class="navelem"><a class="el" href="_kernel_bp_stereo_8cu.html">KernelBpStereo.cu</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
